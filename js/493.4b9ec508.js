"use strict";(self["webpackChunkproject_a"]=self["webpackChunkproject_a"]||[]).push([[493],{2493:function(t,i,e){e.r(i),e.d(i,{default:function(){return _}});var s=e(6768),a=e(4232),o=e(5130);const r={class:"container"},c={class:"productview"},n={class:"categorybtn"},l={class:"row"},d=["onClick"],u={class:"product_img"},h=["src"],g={class:"product_title"},p={class:"product_price text-start"},v={class:"btntool"},b={class:"bd-highlight"},k=["onClick"],f={key:0,class:"bi bi-heart"},m={key:1,class:"bi bi-heart-fill"},C={class:"bd-highlight"},L=["onClick","disabled"],y={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"};function $(t,i,e,$,I,F){const x=(0,s.g2)("LoadingElement"),S=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(x,{active:I.isLoading},null,8,["active"]),(0,s.Lk)("div",r,[(0,s.Lk)("div",c,[i[7]||(i[7]=(0,s.Lk)("h3",null,"全系列耳機",-1)),(0,s.Lk)("div",n,[(0,s.bF)(S,{to:"/productlist/allproducts"},{default:(0,s.k6)((()=>[(0,s.Lk)("button",{class:(0,a.C4)(["btn btn-outline-secondary",{active:"all"===I.category}])},"全部商品",2)])),_:1}),(0,s.Lk)("button",{class:(0,a.C4)(["btn btn-outline-secondary",{active:"gaming"===I.category}]),onClick:i[0]||(i[0]=(0,o.D$)((t=>F.toCategory("gaming")),["prevent"]))},"電競",2),(0,s.Lk)("button",{class:(0,a.C4)(["btn btn-outline-secondary",{active:"bluetooth"===I.category}]),onClick:i[1]||(i[1]=(0,o.D$)((t=>F.toCategory("bluetooth")),["prevent"]))},"藍芽 ",2),(0,s.Lk)("button",{class:(0,a.C4)(["btn btn-outline-secondary",{active:"noise-canceling"===I.category}]),onClick:i[2]||(i[2]=(0,o.D$)((t=>F.toCategory("noise-canceling")),["prevent"]))},"降噪 ",2),(0,s.Lk)("button",{class:(0,a.C4)(["btn btn-outline-secondary",{active:"music-glasses"===I.category}]),onClick:i[3]||(i[3]=(0,o.D$)((t=>F.toCategory("music-glasses")),["prevent"]))},"音訊眼鏡 ",2)]),(0,s.Lk)("div",l,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(I.products,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"productbox col-md-3 col-6",key:e.id},[(0,s.Lk)("a",{href:"#",onClick:(0,o.D$)((t=>F.getProduct(e.id)),["prevent"])},[(0,s.Lk)("div",u,[i[4]||(i[4]=(0,s.Lk)("div",{class:"morebox"},[(0,s.Lk)("div",{class:"morebtn"},"更多資訊")],-1)),(0,s.Lk)("img",{src:e.imageUrl,class:"img-fluid",alt:"image"},null,8,h)]),(0,s.Lk)("div",g,(0,a.v_)(e.title),1),(0,s.Lk)("div",p," NT $"+(0,a.v_)(t.$filters.currency(e.price)),1)],8,d),(0,s.Lk)("div",v,[(0,s.Lk)("div",b,[(0,s.Lk)("button",{class:"btn btn-outline-purple",onClick:t=>F.toggleFavorite(e)},[F.isFavorite(e.id)?((0,s.uX)(),(0,s.CE)("i",m)):((0,s.uX)(),(0,s.CE)("i",f))],8,k)]),(0,s.Lk)("div",C,[(0,s.Lk)("button",{type:"button",class:"moreinfo btn btn-outline-purple",onClick:t=>F.addToCart(e.id),disabled:this.status.loadingItem===e.id},[this.status.loadingItem===e.id?((0,s.uX)(),(0,s.CE)("div",y,i[5]||(i[5]=[(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1)]))):(0,s.Q3)("",!0),i[6]||(i[6]=(0,s.Lk)("i",{class:"bi bi-cart2"},null,-1))],8,L)])])])))),128))])])])],64)}e(4114),e(8111),e(116),e(7588),e(3579);var I=e(1600),F={data(){return{products:[],product:{},isLoading:!1,status:{loadingItem:""},favorite:[],favoriteIds:[],category:"all"}},methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/hughesh-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.isLoading=!1,t.data.success&&(this.products=t.data.products.reverse())}))},getProduct(t){this.$router.push(`/productlist/product/${t}`)},addToCart(t){const i="https://vue3-course-api.hexschool.io/api/hughesh-api/cart";this.status.loadingItem=t;const e={product_id:t,qty:1};this.$http.post(i,{data:e}).then((t=>{this.$httpMessageState(t,"成功加入購物車"),this.status.loadingItem="",I.A.emit("update-cart")}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/hughesh-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.isLoading=!1,t.data.success&&(this.cart=t.data.data.carts)}))},getFavorite(){this.favorite=JSON.parse(localStorage.getItem("favorite"))||[],this.favoriteIds=[],this.favorite.forEach((t=>{this.favoriteIds.push(t.id)}))},isFavorite(t){return this.favoriteIds.some((i=>i===t))},toggleFavorite(t){const i=t.id,e=this.favorite.some((t=>t.id===i));if(e){const t=this.favorite.find((t=>t.id===i));this.favorite.splice(this.favorite.indexOf(t),1),localStorage.setItem("favorite",JSON.stringify(this.favorite))}else this.favorite.push(t),localStorage.setItem("favorite",JSON.stringify(this.favorite));this.getFavorite(),I.A.emit("update-favorite")},toCategory(t){this.$router.replace(`/productlist/${t}`),I.A.emit("update-navbar-active","productlist")}},created(){const t="https://vue3-course-api.hexschool.io/api/hughesh-api/cart";this.$http.get(t).then((t=>{t.data.success&&(this.cartNum=t.data.data.carts.length)})),this.favNum=(JSON.parse(localStorage.getItem("favorite"))||[]).length,this.getCart(),this.getFavorite(),this.getProducts()}},x=e(1241);const S=(0,x.A)(F,[["render",$]]);var _=S}}]);
//# sourceMappingURL=493.4b9ec508.js.map