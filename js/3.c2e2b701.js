"use strict";(self["webpackChunkproject_a"]=self["webpackChunkproject_a"]||[]).push([[3],{4084:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAwCAYAAAARtFotAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAyIDc5LjE2NDM1MiwgMjAyMC8wMS8zMC0xNTo1MDozOCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzVDQzIyNzM0QTdGMTFGMEJBMjA5M0ExRUU3OTA3RUQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzVDQzIyNzI0QTdGMTFGMEJBMjA5M0ExRUU3OTA3RUQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Qjk5NEU3MTAzQjY2MTFGMEI4NDJGQUY3MjBDRTE4QjciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Qjk5NEU3MTEzQjY2MTFGMEI4NDJGQUY3MjBDRTE4QjciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5qtEt7AAAAOklEQVR42uzVMREAMAgAMejhXwBmqQkGhryArJ8zE5u9WA4IBAKBwLNgdffqR9OXgUAgEAg8A34BBgAdjgkoHI3QwgAAAABJRU5ErkJggg=="},6003:function(e,l,a){a.r(l),a.d(l,{default:function(){return H}});var t=a(6768),s=a(4232),c=a(5130),o=a(4084);const i={class:"container"},d={class:"userfavorite"},r={class:"row justify-content-center"},n={class:"col-md-8"},m={class:"payment-item"},p={class:"row"},u={class:"col-12"},h={class:"cart-productimg"},b=["src"],v={class:"payment-productname"},g={class:"productname-text"},k={class:"cart-qty-mobi"},f={class:"cartqtynum"},y={class:"cart-qty"},L={class:"cart-productprice text-end"},A={key:0,class:"price_difference text-success text-end"},M={class:"finalprice_section"},I={class:"d-flex cart-price"},x={class:"p-2 payment-totalprice"},C={class:""},E={class:"col-md-12 col-12 usecoupon input-gorup mb-3 input-group-sm"},V={class:"row"},U={class:"col-md-4 mb-3"},G={class:"col-md-3 input-group-append"},w={class:"creditcard col-md-12 col-12 mb-3"},Q={class:"form-check"},j={key:0,class:"col-md-8 col-xs-12 col-12 creditcardinfo needs-validation"},R={class:"form-check"},F={key:0,class:"col-md-8 col-12 creditcardinfo"},Y={class:"form-check"},z={class:"mb-3"},O={class:"mb-3"},B={class:"mb-3"},N={class:"mb-3"},W={class:"mb-3"};function Z(e,l,a,Z,D,S){const J=(0,t.g2)("LoadingElement"),_=(0,t.g2)("VField"),H=(0,t.g2)("ErrorMessage"),P=(0,t.g2)("VForm");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(J,{active:D.isLoading},null,8,["active"]),(0,t.Lk)("div",i,[(0,t.Lk)("div",d,[(0,t.Lk)("div",r,[(0,t.Lk)("div",n,[l[27]||(l[27]=(0,t.Lk)("h3",null,[(0,t.Lk)("i",{class:"bi bi-cart-check"}),(0,t.eW)(" 購物車")],-1)),D.cart.carts&&D.cart.carts.length>0?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[l[26]||(l[26]=(0,t.Fv)('<div class="paymentschedule justify-content-center"><div class="payment-step-off text-center"><i class="bi bi-1-circle"></i> <br>確認商品 </div><div class="payment-step align-middle text-center"><img src="'+o+'" alt="image"></div><div class="payment-step text-center"><i class="bi bi-2-circle-fill"></i> <br>填寫結帳資訊 </div><div class="payment-step align-middle text-center"><img src="'+o+'" alt="image"></div><div class="payment-step-off text-center"><i class="bi bi-3-circle"></i> <br>訂購完成 </div></div>',1)),(0,t.Lk)("div",m,[(0,t.Lk)("div",p,[(0,t.Lk)("div",u,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(D.cart.carts,(l=>((0,t.uX)(),(0,t.CE)("div",{class:"d-flex align-items-center cart-info",key:l.id},[(0,t.Lk)("div",h,[(0,t.Lk)("img",{src:l.product.imageUrl,alt:"產品照",class:"uctimg img-fluid"},null,8,b)]),(0,t.Lk)("div",v,[(0,t.Lk)("div",g,(0,s.v_)(l.product.title),1),(0,t.Lk)("div",k,[(0,t.Lk)("div",f,"數量 : "+(0,s.v_)(l.qty),1)])]),(0,t.Lk)("div",y," 數量 : "+(0,s.v_)(l.qty),1),(0,t.Lk)("div",L," $"+(0,s.v_)(e.$filters.currency(l.total)),1)])))),128))])])]),D.cart.total!==D.cart.final_total?((0,t.uX)(),(0,t.CE)("div",A," 折扣 : - $"+(0,s.v_)(e.$filters.currency(D.cart.total-D.cart.final_total)),1)):(0,t.Q3)("",!0),(0,t.Lk)("div",M,[(0,t.Lk)("div",I,[l[11]||(l[11]=(0,t.Lk)("div",{class:"me-auto p-2"},null,-1)),(0,t.Lk)("p",x,[l[10]||(l[10]=(0,t.eW)("實際結帳金額：")),(0,t.Lk)("span",C,"NT$ "+(0,s.v_)(e.$filters.currency(Math.ceil(D.cart.final_total))),1)])])]),(0,t.Lk)("div",E,[l[12]||(l[12]=(0,t.Lk)("p",{class:"title"},"使用優惠券",-1)),(0,t.Lk)("div",V,[(0,t.Lk)("div",U,[(0,t.bo)((0,t.Lk)("input",{"aria-label":"couponcode","onUpdate:modelValue":l[0]||(l[0]=e=>D.coupon_code=e),type:"text",class:"form-control",placeholder:"請輸入優惠碼"},null,512),[[c.Jo,D.coupon_code]])]),(0,t.Lk)("div",G,[(0,t.Lk)("button",{class:"btn btn-secondary usecouponbtn",type:"button",onClick:l[1]||(l[1]=(...e)=>S.addCouponCode&&S.addCouponCode(...e))},"套用優惠碼")])])]),(0,t.Lk)("div",w,[l[18]||(l[18]=(0,t.Lk)("div",{class:"title mb-3"},"付款方式",-1)),(0,t.Lk)("div",Q,[(0,t.bo)((0,t.Lk)("input",{class:"form-check-input",type:"radio",name:"payway1",id:"payway1",value:"creditcard1","onUpdate:modelValue":l[2]||(l[2]=e=>D.selectedPaymentMethod=e)},null,512),[[c.XL,D.selectedPaymentMethod]]),l[14]||(l[14]=(0,t.Lk)("label",{class:"form-check-label mb-3",for:"payway1"},"信用卡一次付清",-1)),"creditcard1"===D.selectedPaymentMethod?((0,t.uX)(),(0,t.CE)("div",j,l[13]||(l[13]=[(0,t.Fv)('<label for="ccardnum" class="col-sm-3 col-form-label">信用卡卡號</label><div class="row col-md-12 col-12 g-4 mb-2"><div class="col-md-3 col-sm"><input type="text" maxlength="4" class="form-control" placeholder="0857" aria-label="num1"></div><div class="col-md-3 col-sm"><input type="text" maxlength="4" class="form-control" placeholder="0857" aria-label="num2"></div><div class="col-md-3 col-sm"><input type="text" maxlength="4" class="form-control" placeholder="0857" aria-label="num3"></div><div class="col-md-3 col-sm mb-1"><input type="text" maxlength="4" class="form-control" placeholder="0857" aria-label="num4"></div></div><label class="col-sm-12 col-form-label">安全碼(卡片後面3位數字)</label><div class="col-md-2 col-sm"><input type="text" maxlength="3" class="form-control" placeholder="cvc" aria-label="num4"></div>',4)]))):(0,t.Q3)("",!0)]),(0,t.Lk)("div",R,[(0,t.bo)((0,t.Lk)("input",{class:"form-check-input",type:"radio",name:"payway2",id:"payway2",value:"creditcard2","onUpdate:modelValue":l[3]||(l[3]=e=>D.selectedPaymentMethod=e)},null,512),[[c.XL,D.selectedPaymentMethod]]),l[16]||(l[16]=(0,t.Lk)("label",{class:"form-check-label mb-3",for:"payway2"},"信用卡分期付款",-1)),"creditcard2"===D.selectedPaymentMethod?((0,t.uX)(),(0,t.CE)("div",F,l[15]||(l[15]=[(0,t.Fv)('<label for="ccardnum" class="col-sm-3 col-form-label">信用卡卡號</label><div class="row col-md-12 col-12 g-4 mb-2"><div class="col-md-3 col-sm"><input type="text" maxlength="4" class="form-control" placeholder="0857" aria-label="num1"></div><div class="col-md-3 col-sm"><input type="text" maxlength="4" class="form-control" placeholder="0857" aria-label="num2"></div><div class="col-md-3 col-sm"><input type="text" maxlength="4" class="form-control" placeholder="0857" aria-label="num3"></div><div class="col-md-3 col-sm mb-1"><input type="text" maxlength="4" class="form-control" placeholder="0857" aria-label="num4"></div></div><label class="col-sm-12 col-form-label">安全碼(卡片後面3位數字)</label><div class="col-md-2 col-sm mb-3"><input type="text" maxlength="3" class="form-control" placeholder="cvc" aria-label="num4"></div><div class="col-md-3 col-sm"><label class="col-sm-12 col-form-label">分期期數</label><select class="form-select col-md-2" aria-label="Default select example"><option selected>請選擇</option><option value="1">3</option><option value="2">6</option><option value="3">12</option></select></div>',5)]))):(0,t.Q3)("",!0)]),(0,t.Lk)("div",Y,[(0,t.bo)((0,t.Lk)("input",{class:"form-check-input",type:"radio",name:"payway4",id:"payway4",value:"creditcard4","onUpdate:modelValue":l[4]||(l[4]=e=>D.selectedPaymentMethod=e)},null,512),[[c.XL,D.selectedPaymentMethod]]),l[17]||(l[17]=(0,t.Lk)("label",{class:"form-check-label mb-3",for:"payway4"},"貨到付款",-1))])]),(0,t.bF)(P,{class:"orderinfo col-md-12",onSubmit:S.createOrder},{default:(0,t.k6)((({errors:e})=>[l[24]||(l[24]=(0,t.Lk)("p",{class:"title"},[(0,t.eW)("收件人資訊"),(0,t.Lk)("span",{class:"markinput"},"( * 為必填欄位)")],-1)),(0,t.Lk)("div",z,[l[19]||(l[19]=(0,t.Lk)("label",{for:"name",class:"form-label"},"* 收件人姓名",-1)),(0,t.bF)(_,{id:"name",name:"姓名",type:"name",class:(0,s.C4)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:D.form.user.name,"onUpdate:modelValue":l[5]||(l[5]=e=>D.form.user.name=e)},null,8,["class","modelValue"]),(0,t.bF)(H,{name:"姓名",class:"invalid-feedback"})]),(0,t.Lk)("div",O,[l[20]||(l[20]=(0,t.Lk)("label",{for:"address",class:"form-label"},"* 收件人地址",-1)),(0,t.bF)(_,{id:"address",name:"地址",type:"address",class:(0,s.C4)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:D.form.user.address,"onUpdate:modelValue":l[6]||(l[6]=e=>D.form.user.address=e)},null,8,["class","modelValue"]),(0,t.bF)(H,{name:"地址",class:"invalid-feedback"})]),(0,t.Lk)("div",B,[l[21]||(l[21]=(0,t.Lk)("label",{for:"tel",class:"form-label"},"* 收件人電話",-1)),(0,t.bF)(_,{id:"tel",name:"電話",type:"tel",class:(0,s.C4)(["form-control",{"is-invalid":e["電話"]}]),maxlength:"10",placeholder:"請輸入電話",rules:"required",modelValue:D.form.user.tel,"onUpdate:modelValue":l[7]||(l[7]=e=>D.form.user.tel=e)},null,8,["class","modelValue"]),(0,t.bF)(H,{name:"電話",class:"invalid-feedback"})]),(0,t.Lk)("div",N,[l[22]||(l[22]=(0,t.Lk)("label",{for:"email",class:"form-label"},"* Email",-1)),(0,t.bF)(_,{id:"email",name:"email",type:"email",class:(0,s.C4)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入Email",rules:"email|required",modelValue:D.form.user.email,"onUpdate:modelValue":l[8]||(l[8]=e=>D.form.user.email=e)},null,8,["class","modelValue"]),(0,t.bF)(H,{name:"email",class:"invalid-feedback"})]),(0,t.Lk)("div",W,[l[23]||(l[23]=(0,t.Lk)("label",{for:"message",class:"form-label"},"留言",-1)),(0,t.bo)((0,t.Lk)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"3",placeholder:"請輸入留言","onUpdate:modelValue":l[9]||(l[9]=e=>D.form.user.message=e)},null,512),[[c.Jo,D.form.user.message]])]),l[25]||(l[25]=(0,t.Lk)("div",{class:"text-end"},[(0,t.Lk)("button",{class:"btn btn-purple"},"確認付款")],-1))])),_:1},8,["onSubmit"])],64)):(0,t.Q3)("",!0)])])])])],64)}a(4114);var D=a(1600),S={data(){return{products:[],product:{},isLoading:!1,status:{loadingItem:""},form:{user:{name:"",emial:"",tel:"",address:""},message:""},cart:{},coupon_code:"",finaltotal:0,orderId:"",selectedPaymentMethod:""}},methods:{scrollBehavior(){window.scrollTo(0,0)},getProducts(){const e="https://vue3-course-api.hexschool.io/api/hughesh-api/products";this.isLoading=!0,this.$http.get(e).then((e=>{this.products=e.data.products,this.isLoading=!1,this.pagination=e.data.pagination}))},getCart(){const e="https://vue3-course-api.hexschool.io/api/hughesh-api/cart";this.isLoading=!0,this.$http.get(e).then((e=>{this.cart=e.data.data,this.isLoading=!1,D.A.emit("update-cart")}))},addCouponCode(){const e="https://vue3-course-api.hexschool.io/api/hughesh-api/coupon",l={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:l}).then((e=>{this.coupon_code===l.code?(this.$httpMessageState(e,"成功套用優惠券"),this.coupon_code="",this.isLoading=!1,this.getCart()):(this.$httpMessageState(e,"優惠碼使用成功"),this.isLoading=!1)}))},getOrderId(e){this.$router.push(`/user/userorder/${e}`)},payOrder(){const e=`https://vue3-course-api.hexschool.io/api/hughesh-api/pay/${this.orderId}`;this.$http.post(e).then((e=>{e.data.success&&this.$httpMessageState(e,"付款成功")}))},createOrder(){const e="https://vue3-course-api.hexschool.io/api/hughesh-api/order",l=this.form;this.isLoading=!0,this.$http.post(e,{data:l}).then((e=>{this.$httpMessageState(e,"訂單建立"),this.isLoading=!1,this.getCart(),this.orderId=e.data.orderId,this.getOrderId(this.orderId),this.payOrder(this.orderId)}))}},created(){this.orderId=this.$route.params.orderId,this.getCart()}},J=a(1241);const _=(0,J.A)(S,[["render",Z]]);var H=_}}]);
//# sourceMappingURL=3.c2e2b701.js.map