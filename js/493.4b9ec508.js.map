{"version":3,"file":"js/493.4b9ec508.js","mappings":"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","sources":["webpack://project_a/./src/views/ProductView.vue","webpack://project_a/./src/views/ProductView.vue?f743"],"sourcesContent":["<template>\r\n  <LoadingElement :active=\"isLoading\"></LoadingElement>\r\n  <div class=\"container\">\r\n    <div class=\"productview\">\r\n      <h3>全系列耳機</h3>\r\n      <div class=\"categorybtn\">\r\n        <router-link to=\"/productlist/allproducts\">\r\n          <button class=\"btn btn-outline-secondary\" :class=\"{ 'active': category === 'all' }\">全部商品</button>\r\n        </router-link>\r\n        <button class=\"btn btn-outline-secondary\" :class=\"{ 'active': category === 'gaming' }\"\r\n          @click.prevent=\"toCategory('gaming')\">電競</button>\r\n        <button class=\"btn btn-outline-secondary\" :class=\"{ 'active': category === 'bluetooth' }\"\r\n          @click.prevent=\"toCategory('bluetooth')\">藍芽\r\n        </button>\r\n        <button class=\"btn btn-outline-secondary\" :class=\"{ 'active': category === 'noise-canceling' }\"\r\n          @click.prevent=\"toCategory('noise-canceling')\">降噪\r\n        </button>\r\n        <button class=\"btn btn-outline-secondary\" :class=\"{ 'active': category === 'music-glasses' }\"\r\n          @click.prevent=\"toCategory('music-glasses')\">音訊眼鏡\r\n        </button>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"productbox col-md-3 col-6\" v-for=\"item in products\" :key=\"item.id\">\r\n          <a href=\"#\" @click.prevent=\"getProduct(item.id)\">\r\n            <div class=\"product_img\">\r\n              <div class=\"morebox\">\r\n                <div class=\"morebtn\">更多資訊</div>\r\n              </div>\r\n              <img :src=\"item.imageUrl\" class=\"img-fluid\" alt=\"image\">\r\n            </div>\r\n            <div class=\"product_title\">\r\n              {{ item.title }}\r\n            </div>\r\n            <div class=\"product_price text-start\">\r\n              NT ${{ $filters.currency(item.price) }}\r\n            </div>\r\n          </a>\r\n          <div class=\"btntool\">\r\n            <div class=\"bd-highlight\">\r\n              <button class=\"btn btn-outline-purple\" @click=\"toggleFavorite(item)\">\r\n                <i class=\"bi bi-heart\" v-if=\"!isFavorite(item.id)\"></i>\r\n                <i class=\"bi bi-heart-fill\" v-else></i>\r\n              </button>\r\n            </div>\r\n            <div class=\"bd-highlight\">\r\n              <button type=\"button\" class=\"moreinfo btn btn-outline-purple\" @click=\"addToCart(item.id)\"\r\n                :disabled=\"this.status.loadingItem === item.id\">\r\n                <div v-if=\"this.status.loadingItem === item.id\" class=\"spinner-grow text-danger spinner-grow-sm\"\r\n                  role=\"status\">\r\n                  <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n                <i class=\"bi bi-cart2\"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\na {\r\n  text-decoration: none;\r\n}\r\n\r\nh3 {\r\n  font-weight: bold;\r\n  color: purple;\r\n}\r\n\r\n.productview {\r\n  margin-top: 150px;\r\n  margin-bottom: 2em;\r\n\r\n  @media (max-width: 960px) {\r\n    padding: 1em 1em 0 1em;\r\n    margin-bottom: 2em;\r\n    margin-top: 100px;\r\n  }\r\n}\r\n\r\n.product_title {\r\n  color: #777;\r\n  font-weight: bold;\r\n  font-size: 1em;\r\n  line-height: 1.3em;\r\n  height: 2em;\r\n  margin-bottom: 0.5em;\r\n\r\n  @media(max-width: 960px) {\r\n    margin-bottom: 0.7em;\r\n  }\r\n}\r\n\r\n.productbox {\r\n  margin-bottom: 1.5em;\r\n\r\n  a {\r\n    display: block;\r\n  }\r\n}\r\n\r\n.product_img {\r\n  width: 100%;\r\n}\r\n\r\n.product_img img {\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n\r\n.product_img:hover img {\r\n  opacity: 0.6;\r\n}\r\n\r\n.morebox {\r\n  position: relative;\r\n}\r\n\r\n.morebtn {\r\n  position: absolute;\r\n  z-index: 999;\r\n  top: 150px;\r\n  left: 47%;\r\n  transform: translate(-50%, -50%);\r\n  transition: all 0.3s ease-in-out;\r\n  font-size: 1em;\r\n  padding: 5px;\r\n  border-radius: 5px;\r\n  opacity: 0;\r\n\r\n  @media(max-width: 960px) {\r\n    top: 100px;\r\n    left: 45%;\r\n    font-size: 0.9em;\r\n  }\r\n}\r\n\r\n.product_img:hover .morebtn {\r\n  opacity: 1;\r\n  background: #7030a0;\r\n  color: #fff;\r\n  text-align: center;\r\n\r\n  @media(max-width:376px) {\r\n    font-size: 0.8em;\r\n  }\r\n}\r\n\r\n.product_price {\r\n  width: 100%;\r\n  font-size: 1em;\r\n  font-weight: bold;\r\n  color: blueviolet;\r\n}\r\n\r\n.btntool {\r\n  z-index: 9999;\r\n  margin-right: 10px;\r\n\r\n  button {\r\n    margin-right: 0.5em;\r\n    margin-top: -2em;\r\n    float: right;\r\n  }\r\n\r\n  @media(max-width:960px) {\r\n    display: none;\r\n  }\r\n}\r\n\r\n.categorybtn {\r\n  margin-top: 2em;\r\n  margin-bottom: 2em;\r\n}\r\n\r\n.categorybtn button {\r\n  margin-right: 0.5em;\r\n\r\n  @media(max-width:960px) {\r\n    font-size: 0.8em;\r\n    margin-bottom: 8px;\r\n  }\r\n}\r\n\r\n.spinner-grow {\r\n  position: absolute;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport emitter from '@/methods/emitter';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      products: [],\r\n      product: {},\r\n      isLoading: false,\r\n      status: {\r\n        loadingItem: '',\r\n      },\r\n      favorite: [], // 追蹤商品暫存陣列位址\r\n      favoriteIds: [], // 比對id的暫存位址\r\n      category: 'all', // 商品分類\r\n    };\r\n  },\r\n  methods: {\r\n    getProducts() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\r\n      this.isLoading = true;\r\n      this.$http.get(url).then((res) => {\r\n        this.isLoading = false;\r\n        if (res.data.success) {\r\n          this.products = res.data.products.reverse();\r\n        }\r\n      });\r\n    },\r\n    getProduct(id) {\r\n      this.$router.push(`/productlist/product/${id}`);\r\n    },\r\n    addToCart(id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.status.loadingItem = id;\r\n      const cart = {\r\n        product_id: id, // 加入購物車會帶入商品id\r\n        qty: 1,\r\n      };\r\n      this.$http.post(url, { data: cart }).then((res) => {\r\n        this.$httpMessageState(res, '成功加入購物車');\r\n        this.status.loadingItem = '';\r\n        emitter.emit('update-cart');\r\n        // this.$router.push('/productlist/usercart');\r\n      });\r\n    },\r\n    getCart() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.isLoading = true;\r\n      this.$http.get(url).then((res) => {\r\n        this.isLoading = false;\r\n        if (res.data.success) {\r\n          this.cart = res.data.data.carts;\r\n        }\r\n      });\r\n    },\r\n    getFavorite() {\r\n      this.favorite = JSON.parse(localStorage.getItem('favorite')) || []; // 將字串轉換為物件或值\r\n      this.favoriteIds = []; // 先將追蹤清單id宣告為空陣列\r\n      this.favorite.forEach((item) => { // 利用forEach迴圈顯示追蹤清單\r\n        this.favoriteIds.push(item.id); // 將加入追蹤的id 增加到追蹤清單內\r\n      });\r\n    },\r\n    isFavorite(id) { // 判斷是否加入追蹤\r\n      return this.favoriteIds.some((item) => item === id); // 回傳符合favoriteIds裡有的id商品\r\n    },\r\n    toggleFavorite(item) { // 加入追蹤\r\n      const toggleid = item.id; // 宣告id參數\r\n      const hasFavorite = this.favorite.some((fav) => fav.id === toggleid); // 宣告hasFavorite為符合點選追蹤按鈕物件的id為商品id，會回傳true or false\r\n      if (!hasFavorite) { // 若不存在於favorite陣列\r\n        this.favorite.push(item); // 將其新增到favorite陣列中\r\n        localStorage.setItem('favorite', JSON.stringify(this.favorite)); // 本機儲存的物件轉換為JSON字串\r\n      } else { // 若已存在於favorite陣列\r\n        const delItem = this.favorite.find((fav) => fav.id === toggleid); // 宣告delItem，若favorite有點選物件的id\r\n        this.favorite.splice(this.favorite.indexOf(delItem), 1); // 將該id從陣列中刪除\r\n        localStorage.setItem('favorite', JSON.stringify(this.favorite)); // 將favorite轉換為JSON字串\r\n      }\r\n      this.getFavorite(); // 每次點選按鈕重新讀取追蹤清單\r\n      emitter.emit('update-favorite');\r\n    },\r\n    toCategory(category) {\r\n      // 使用 replace 而不是 push，並設置 active 狀態\r\n      this.$router.replace(`/productlist/${category}`);\r\n      // 或者可以發送事件給 NavBar 更新狀態\r\n      emitter.emit('update-navbar-active', 'productlist');\r\n    },\r\n  },\r\n  created() {\r\n    const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n    this.$http.get(url).then((res) => {\r\n      if (res.data.success) {\r\n        this.cartNum = res.data.data.carts.length;\r\n      }\r\n    });\r\n    this.favNum = (JSON.parse(localStorage.getItem('favorite')) || []).length;\r\n    this.getCart();\r\n    this.getFavorite();\r\n    this.getProducts();\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./ProductView.vue?vue&type=template&id=009f553a\"\nimport script from \"./ProductView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductView.vue?vue&type=script&lang=js\"\n\nimport \"./ProductView.vue?vue&type=style&index=0&id=009f553a&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","key","role","_createElementBlock","_Fragment","_createVNode","_component_LoadingElement","active","$data","isLoading","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_component_router_link","to","default","_withCtx","_normalizeClass","category","_","onClick","_cache","_withModifiers","$event","$options","toCategory","_hoisted_4","_renderList","products","item","id","href","getProduct","_hoisted_6","src","imageUrl","alt","_hoisted_7","_hoisted_8","_toDisplayString","title","_hoisted_9","_ctx","$filters","currency","price","_hoisted_5","_hoisted_10","_hoisted_11","toggleFavorite","isFavorite","_hoisted_14","_hoisted_13","_hoisted_12","_hoisted_15","type","addToCart","disabled","status","loadingItem","_hoisted_17","_createCommentVNode","_hoisted_16","data","product","favorite","favoriteIds","methods","getProducts","url","this","$http","get","then","res","success","reverse","$router","push","cart","product_id","qty","post","$httpMessageState","emitter","emit","getCart","carts","getFavorite","JSON","parse","localStorage","getItem","forEach","some","toggleid","hasFavorite","fav","delItem","find","splice","indexOf","setItem","stringify","replace","created","cartNum","length","favNum","__exports__","render"],"sourceRoot":""}