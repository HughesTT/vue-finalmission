{"version":3,"file":"js/102.b484af6b.js","mappings":"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","sources":["webpack://project_a/./src/views/UserFavorite.vue","webpack://project_a/./src/views/UserFavorite.vue?f10e"],"sourcesContent":["<template>\r\n  <LoadingElement :active=\"isLoading\" />\r\n  <div class=\"container\">\r\n    <div class=\"userfavorite\">\r\n      <div class=\"row justify-content-center\">\r\n        <div class=\"col-md-8\">\r\n          <h3><i class=\"bi bi-cart-check\"></i> 追蹤清單</h3>\r\n          <template v-if=\"favorite.length !== 0\">\r\n            <div class=\"row\">\r\n              <div class=\"productbox col-md-4 col-6\" v-for=\"item in favorite\" :key=\"item.id\">\r\n                <a href=\"#\" @click.prevent=\"getProduct(item.id)\">\r\n                  <div class=\"product_img\">\r\n                    <div class=\"morebox\">\r\n                      <div class=\"morebtn\">more</div>\r\n                    </div>\r\n                    <img :src=\"item.imageUrl\" class=\"img-fluid\" alt=\"image\">\r\n                  </div>\r\n                  <div class=\"product_title\">\r\n                    {{ item.title }}\r\n                  </div>\r\n                  <div class=\"product_price\">\r\n                    NT ${{ $filters.currency(item.price) }}\r\n                  </div>\r\n                </a>\r\n                <div class=\"btntool\">\r\n                  <button class=\"btn btn-outline-danger col-md-6 col-7\" @click=\"toggleFavorite(item)\">\r\n                    <span v-if=\"!isFavorite(item.id)\">移除追蹤</span>\r\n                  </button>\r\n                  <button type=\"button\" class=\"moreinfo btn btn-outline-danger col-md-4 col-3\"\r\n                    @click=\"addToCart(item.id)\" :disabled=\"this.status.loadingItem === item.id\">\r\n                    <div v-if=\"this.status.loadingItem === item.id\" class=\"spinner-grow text-danger spinner-grow-sm\"\r\n                      role=\"status\">\r\n                      <span class=\"visually-hidden\">Loading...</span>\r\n                    </div>\r\n                    <i class=\"bi bi-cart2\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </template>\r\n          <template v-else>\r\n            <div class=\"goshopping\">你的追蹤清單是空的，快去挑選喜歡的商品吧</div>\r\n            <div class=\"mx-auto\" style=\"width: 100px;\">\r\n              <router-link to=\"/productlist/allproducts\" class=\"mx-auto goto\">去逛逛</router-link>\r\n            </div>\r\n          </template>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"notify\">\r\n    <div class=\"container\">\r\n      <div class=\"row\">\r\n        <div class=\"notifybox col-md-4\">\r\n          <div class=\"notify-icon\">\r\n            <i class=\"bi bi-truck\"></i>\r\n          </div>\r\n          <div class=\"notify-title\">\r\n            運送 & 運費須知\r\n          </div>\r\n          <div class=\"notify-border\"></div>\r\n          <div class=\"notify-content\">\r\n            <p>運費會根據送貨區域而有所不同。<br>\r\n              如果一次購買商品總金額達到NT$8000或以上，則運費免費。</p>\r\n          </div>\r\n        </div>\r\n        <div class=\"notifybox col-md-4\">\r\n          <div class=\"notify-icon\">\r\n            <i class=\"bi bi-info-circle\"></i>\r\n          </div>\r\n          <div class=\"notify-title\">\r\n            退貨須知\r\n          </div>\r\n          <div class=\"notify-border\"></div>\r\n          <div class=\"notify-content\">\r\n            <div class=\"notify-box\">\r\n              <div class=\"notify-boxtitle\">- 瑕疵品</div>\r\n              <p>若收到產品後請立即與我們聯繫。請注意，除非產品本身的瑕疵，否則將不受理退貨。</p>\r\n            </div>\r\n            <div class=\"notify-box\">\r\n              <div class=\"notify-boxtitle\">- 退貨期限</div>\r\n              <p>請在收到產品後 7 天內透過電子郵件或電話聯絡我們以了解詳細資訊。 請注意，視實際情況可能無法受理退貨、換貨或取消。</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"notifybox col-md-4\">\r\n          <div class=\"notify-icon\">\r\n            <i class=\"bi bi-coin\"></i>\r\n          </div>\r\n          <div class=\"notify-title\">\r\n            付款方式\r\n          </div>\r\n          <div class=\"notify-border\"></div>\r\n          <div class=\"notify-content\">\r\n            <div class=\"notify-box\">\r\n              <div class=\"notify-boxtitle\">- 信用卡付款</div>\r\n              <img src=\"../assets/img/creditcard.png\" alt=\"發卡組織\" class=\"img-fluid\" width=\"120\">\r\n            </div>\r\n            <div class=\"notify-box\">\r\n              <div class=\"notify-boxtitle\">- 貨到付款</div>\r\n              <p>請注意，付款費用會根據產品價格而有所不同。</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\na {\r\n  text-decoration: none;\r\n}\r\n\r\nh3 {\r\n  font-weight: bold;\r\n  color: purple;\r\n}\r\n\r\n.product_title {\r\n  color: #333;\r\n  height: 2.5em;\r\n  margin-bottom: 0.5em;\r\n}\r\n\r\n.product_img {\r\n  width: 100%;\r\n}\r\n\r\n.product_img img {\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n\r\n.product_img:hover img {\r\n  opacity: 0.6;\r\n}\r\n\r\n.userfavorite {\r\n  min-height: 200px;\r\n  padding: 0 1em 0 1em;\r\n  margin-top: 150px;\r\n  margin-bottom: 5em;\r\n\r\n  @media(max-width:960px) {\r\n    margin-top: 120px;\r\n  }\r\n}\r\n\r\nbutton {\r\n  margin-right: 10px;\r\n}\r\n\r\n.morebox {\r\n  position: relative;\r\n}\r\n\r\n.morebox {\r\n  position: relative;\r\n}\r\n\r\n.morebtn {\r\n  position: absolute;\r\n  z-index: 999;\r\n  top: 150px;\r\n  left: 47%;\r\n  transform: translate(-50%, -50%);\r\n  transition: all 0.3s ease-in-out;\r\n  font-size: 1.5em;\r\n  padding: 0.5em;\r\n  border-radius: 5px;\r\n  opacity: 0;\r\n\r\n  @media(max-width: 960px) {\r\n    top: 100px;\r\n    left: 45%;\r\n  }\r\n}\r\n\r\n.product_img:hover .morebtn {\r\n  opacity: 1;\r\n  background: #7030a0;\r\n  color: #fff;\r\n}\r\n\r\n.product_price {\r\n  font-size: 1em;\r\n  font-weight: bold;\r\n  color: blueviolet;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.goshopping {\r\n  font-size: 1.3rem;\r\n  text-align: center;\r\n  margin: 1.5em 0;\r\n}\r\n\r\n.goto {\r\n  background: #7030a0;\r\n  color: #fff;\r\n  padding: 0.5em 1em;\r\n  border-radius: 30px;\r\n}\r\n\r\n.notify {\r\n  background: #eee;\r\n  padding: 2em 0 2.5em 0;\r\n  color: #333;\r\n}\r\n\r\n.notifybox {\r\n  @media(max-width: 960px) {\r\n    margin-bottom: 2em;\r\n  }\r\n}\r\n\r\n.notify-icon {\r\n  font-size: 3.5em;\r\n  text-align: center;\r\n  color: #333;\r\n}\r\n\r\n.notify-title {\r\n  font-size: 1.3em;\r\n  text-align: center;\r\n  margin-bottom: 1em;\r\n}\r\n\r\n.notify-border {\r\n  width: 100%;\r\n  height: 1px;\r\n  background: #999;\r\n  margin-bottom: 1em;\r\n}\r\n\r\n.notify-content {\r\n  padding: 0 1.5em;\r\n}\r\n\r\n.notify-box {\r\n  margin-bottom: 1em;\r\n}\r\n\r\n.notify-boxtitle {\r\n  font-weight: bold;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport emitter from '@/methods/emitter';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      products: [],\r\n      product: {},\r\n      status: {\r\n        loadingItem: '',\r\n      },\r\n      isLoading: false,\r\n      favorite: [], // 追蹤商品暫存陣列位址\r\n      favoriteIds: [], // 比對id的暫存位址\r\n    };\r\n  },\r\n  methods: {\r\n    scrollBehavior() {\r\n      window.scrollTo(0, 0);\r\n    },\r\n    getFavorite() {\r\n      this.favorite = JSON.parse(localStorage.getItem('favorite')) || [];\r\n    },\r\n    removeFavorite(item) {\r\n      this.favorite.splice(this.favorite.indexOf(item), 1);\r\n      localStorage.setItem('favorite', JSON.stringify(this.favorite));\r\n      this.getFavorite();\r\n      emitter.emit('update-favorite');\r\n    },\r\n    getProduct(id) {\r\n      this.$router.push(`/productlist/product/${id}`);\r\n    },\r\n    addToCart(id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.status.loadingItem = id;\r\n      const cart = {\r\n        product_id: id, // 加入購物車會帶入商品id\r\n        qty: 1,\r\n      };\r\n      this.$http.post(url, { data: cart }).then((res) => {\r\n        this.$httpMessageState(res, '成功加入購物車');\r\n        this.status.loadingItem = '';\r\n        emitter.emit('update-cart');\r\n        // this.$router.push('/productlist/usercart');\r\n      });\r\n    },\r\n    getCart() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.isLoading = true;\r\n      this.$http.get(url).then((res) => {\r\n        this.cart = res.data.data;\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n    isFavorite(id) { // 判斷是否加入追蹤\r\n      return this.favoriteIds.some((item) => item === id); // 回傳符合favoriteIds裡有的id商品\r\n    },\r\n    toggleFavorite(item) { // 加入追蹤\r\n      const toggleid = item.id; // 宣告id參數\r\n      const hasFavorite = this.favorite.some((fav) => fav.id === toggleid); // 宣告hasFavorite為符合點選追蹤按鈕物件的id為商品id，會回傳true or false\r\n      if (!hasFavorite) { // 若不存在於favorite陣列\r\n        this.favorite.push(item); // 將其新增到favorite陣列中\r\n        localStorage.setItem('favorite', JSON.stringify(this.favorite)); // 本機儲存的物件轉換為JSON字串\r\n      } else { // 若已存在於favorite陣列\r\n        const delItem = this.favorite.find((fav) => fav.id === toggleid); // 宣告delItem，若favorite有點選物件的id\r\n        this.favorite.splice(this.favorite.indexOf(delItem), 1); // 將該id從陣列中刪除\r\n        localStorage.setItem('favorite', JSON.stringify(this.favorite)); // 將favorite轉換為JSON字串\r\n      }\r\n      this.getFavorite(); // 每次點選按鈕重新讀取追蹤清單\r\n      emitter.emit('update-favorite');\r\n    },\r\n  },\r\n  created() {\r\n    this.favorite = JSON.parse(localStorage.getItem('favorite')) || [];\r\n    this.scrollBehavior();\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./UserFavorite.vue?vue&type=template&id=2e2e83a1\"\nimport script from \"./UserFavorite.vue?vue&type=script&lang=js\"\nexport * from \"./UserFavorite.vue?vue&type=script&lang=js\"\n\nimport \"./UserFavorite.vue?vue&type=style&index=0&id=2e2e83a1&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","key","role","style","_createElementBlock","_Fragment","_createVNode","_component_LoadingElement","active","$data","isLoading","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createTextVNode","favorite","length","_hoisted_5","_renderList","item","id","href","onClick","_withModifiers","$event","$options","getProduct","_hoisted_7","src","imageUrl","alt","_hoisted_8","_hoisted_9","_toDisplayString","title","_hoisted_10","_ctx","$filters","currency","price","_hoisted_6","_hoisted_11","toggleFavorite","isFavorite","_createCommentVNode","_hoisted_13","_hoisted_12","type","addToCart","disabled","status","loadingItem","_hoisted_15","_cache","_hoisted_14","_hoisted_16","_component_router_link","to","default","_withCtx","_","_createStaticVNode","_imports_0","data","products","product","favoriteIds","methods","scrollBehavior","window","scrollTo","getFavorite","this","JSON","parse","localStorage","getItem","removeFavorite","splice","indexOf","setItem","stringify","emitter","emit","$router","push","url","cart","product_id","qty","$http","post","then","res","$httpMessageState","getCart","get","some","toggleid","hasFavorite","fav","delItem","find","created","__exports__","render"],"sourceRoot":""}