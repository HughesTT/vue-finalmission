{"version":3,"file":"js/612.4407b975.js","mappings":"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","sources":["webpack://project_a/./src/views/ProductCategory.vue","webpack://project_a/./src/views/ProductCategory.vue?05ac"],"sourcesContent":["<template>\r\n  <LoadingElement :active=\"isLoading\"></LoadingElement>\r\n  <div class=\"container\">\r\n    <div class=\"productview\">\r\n      <h3>全系列耳機</h3>\r\n      <div class=\"categorybtn\">\r\n        <router-link to=\"/productlist/allproducts\">\r\n          <button class=\"btn btn-outline-secondary\">全部商品</button>\r\n        </router-link>\r\n        <button class=\"btn btn-outline-secondary\" :class=\"{ 'active': category === 'gaming' }\"\r\n          @click.prevent=\"toCategory('gaming')\">電競</button>\r\n        <button class=\"btn btn-outline-secondary\" :class=\"{ 'active': category === 'bluetooth' }\"\r\n          @click.prevent=\"toCategory('bluetooth')\">藍芽\r\n        </button>\r\n        <button class=\"btn btn-outline-secondary\" :class=\"{ 'active': category === 'noise-canceling' }\"\r\n          @click.prevent=\"toCategory('noise-canceling')\">降噪\r\n        </button>\r\n        <button class=\"btn btn-outline-secondary\" :class=\"{ 'active': category === 'music-glasses' }\"\r\n          @click.prevent=\"toCategory('music-glasses')\">音訊眼鏡\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"productbox col-md-3 col-6\" v-for=\"item in products\" :key=\"item.id\">\r\n          <a href=\"#\" @click.prevent=\"getProduct(item.id)\">\r\n            <div class=\"product_img\">\r\n              <div class=\"morebox\">\r\n                <div class=\"morebtn\">更多資訊</div>\r\n              </div>\r\n              <img :src=\"item.imageUrl\" class=\"img-fluid\" alt=\"image\">\r\n            </div>\r\n            <div class=\"product_title\">\r\n              {{ item.title }}\r\n            </div>\r\n            <div class=\"product_price text-start\">\r\n              NT ${{ $filters.currency(item.price) }}\r\n            </div>\r\n          </a>\r\n          <div class=\"btntool\">\r\n            <div class=\"bd-highlight\">\r\n              <button class=\"btn btn-outline-danger\" @click=\"toggleFavorite(item)\">\r\n                <i class=\"bi bi-heart\" v-if=\"!isFavorite(item.id)\"></i>\r\n                <i class=\"bi bi-heart-fill\" v-else></i>\r\n              </button>\r\n            </div>\r\n            <div class=\"bd-highlight\">\r\n              <button type=\"button\" class=\"moreinfo btn btn-outline-danger\" @click=\"addToCart(item.id)\"\r\n                :disabled=\"this.status.loadingItem === item.id\">\r\n                <div v-if=\"this.status.loadingItem === item.id\" class=\"spinner-grow text-danger spinner-grow-sm\"\r\n                  role=\"status\">\r\n                  <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n                <i class=\"bi bi-cart2\"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\na {\r\n  text-decoration: none;\r\n}\r\n\r\nh3 {\r\n  font-weight: bold;\r\n  color: purple;\r\n}\r\n\r\n.productview {\r\n  margin-top: 150px;\r\n  margin-bottom: 2em;\r\n\r\n  @media (max-width: 960px) {\r\n    padding: 1em 1em 0 1em;\r\n    margin-bottom: 2em;\r\n    margin-top: 100px;\r\n  }\r\n}\r\n\r\n.product_title {\r\n  color: #777;\r\n  font-weight: bold;\r\n  font-size: 1em;\r\n  line-height: 1.3em;\r\n  height: 2em;\r\n  margin-bottom: 0.5em;\r\n\r\n  @media(max-width: 960px) {\r\n    margin-bottom: 0.7em;\r\n  }\r\n}\r\n\r\n.productbox {\r\n  margin-bottom: 1.5em;\r\n\r\n  a {\r\n    display: block;\r\n  }\r\n}\r\n\r\n.product_img {\r\n  width: 100%;\r\n}\r\n\r\n.product_img img {\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n\r\n.product_img:hover img {\r\n  opacity: 0.6;\r\n}\r\n\r\n.morebox {\r\n  position: relative;\r\n}\r\n\r\n.morebtn {\r\n  position: absolute;\r\n  z-index: 999;\r\n  top: 150px;\r\n  left: 47%;\r\n  transform: translate(-50%, -50%);\r\n  transition: all 0.3s ease-in-out;\r\n  font-size: 1em;\r\n  padding: 0.5em;\r\n  border-radius: 5px;\r\n  opacity: 0;\r\n\r\n  @media(max-width: 960px) {\r\n    top: 100px;\r\n    left: 45%;\r\n  }\r\n}\r\n\r\n.product_img:hover .morebtn {\r\n  opacity: 1;\r\n  background: #7030a0;\r\n  color: #fff;\r\n}\r\n\r\n.product_price {\r\n  width: 100%;\r\n  font-size: 1em;\r\n  font-weight: bold;\r\n  color: blueviolet;\r\n}\r\n\r\n.btntool {\r\n  z-index: 9999;\r\n  margin-right: 10px;\r\n\r\n  button {\r\n    margin-right: 0.5em;\r\n    margin-top: -2em;\r\n    float: right;\r\n  }\r\n\r\n  @media(max-width:960px) {\r\n    display: none;\r\n  }\r\n}\r\n\r\n.categorybtn {\r\n  margin-top: 2em;\r\n  margin-bottom: 2em;\r\n}\r\n\r\n.categorybtn button {\r\n  margin-right: 0.5em;\r\n\r\n  @media(max-width:960px) {\r\n    font-size: 0.8em;\r\n    margin-bottom: 8px;\r\n  }\r\n}\r\n\r\n.spinner-grow {\r\n  position: absolute;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport emitter from '@/methods/emitter';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      products: [],\r\n      product: {},\r\n      isLoading: false,\r\n      status: {\r\n        loadingItem: '',\r\n      },\r\n      favorite: [], // 追蹤商品暫存陣列位址\r\n      favoriteIds: [], // 比對id的暫存位址\r\n      category: 'all', // 商品分類\r\n    };\r\n  },\r\n  watch: {\r\n    '$route.params.category': {\r\n      handler() { // 監聽路由參數變化，重新獲取商品列表\r\n        this.products = []; // 清空商品列表\r\n        this.getProducts(); // 重新獲取商品列表\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n  methods: {\r\n    getProducts() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\r\n      this.isLoading = true;\r\n      this.$http.get(url).then((res) => {\r\n        if (res.data.success) {\r\n          this.category = this.$route.params.category; // 根據路由參數取得分類，按鈕會根據此參數改變樣式\r\n          if (!this.$route.params.category) { // 若沒有指定分類，則顯示全部商品\r\n            this.products = res.data.products.reverse();\r\n          } else {\r\n            this.products = res.data.products.filter((item) => item.category === this.$route.params.category);\r\n          }\r\n        }\r\n        this.isLoading = false;// 讀取完指定分類商品後才關閉loading動態\r\n      });\r\n    },\r\n    getProduct(id) {\r\n      this.$router.push(`/productlist/product/${id}`);\r\n    },\r\n    addToCart(id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.status.loadingItem = id;\r\n      const cart = {\r\n        product_id: id, // 加入購物車會帶入商品id\r\n        qty: 1,\r\n      };\r\n      this.$http.post(url, { data: cart }).then((res) => {\r\n        this.$httpMessageState(res, '成功加入購物車');\r\n        this.status.loadingItem = '';\r\n        emitter.emit('update-cart');\r\n        // this.$router.push('/productlist/usercart');\r\n      });\r\n    },\r\n    getCart() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.isLoading = true;\r\n      this.$http.get(url).then((res) => {\r\n        this.isLoading = false;\r\n        if (res.data.success) {\r\n          this.cart = res.data.data.carts;\r\n        }\r\n      });\r\n    },\r\n    getFavorite() {\r\n      this.favorite = JSON.parse(localStorage.getItem('favorite')) || []; // 將字串轉換為物件或值\r\n      this.favoriteIds = []; // 先將追蹤清單id宣告為空陣列\r\n      this.favorite.forEach((item) => { // 利用forEach迴圈顯示追蹤清單\r\n        this.favoriteIds.push(item.id); // 將加入追蹤的id 增加到追蹤清單內\r\n      });\r\n    },\r\n    isFavorite(id) { // 判斷是否加入追蹤\r\n      return this.favoriteIds.some((item) => item === id); // 回傳符合favoriteIds裡有的id商品\r\n    },\r\n    toggleFavorite(item) { // 加入追蹤\r\n      const toggleid = item.id; // 宣告id參數\r\n      const hasFavorite = this.favorite.some((fav) => fav.id === toggleid); // 宣告hasFavorite為符合點選追蹤按鈕物件的id為商品id，會回傳true or false\r\n      if (!hasFavorite) { // 若不存在於favorite陣列\r\n        this.favorite.push(item); // 將其新增到favorite陣列中\r\n        localStorage.setItem('favorite', JSON.stringify(this.favorite)); // 本機儲存的物件轉換為JSON字串\r\n      } else { // 若已存在於favorite陣列\r\n        const delItem = this.favorite.find((fav) => fav.id === toggleid); // 宣告delItem，若favorite有點選物件的id\r\n        this.favorite.splice(this.favorite.indexOf(delItem), 1); // 將該id從陣列中刪除\r\n        localStorage.setItem('favorite', JSON.stringify(this.favorite)); // 將favorite轉換為JSON字串\r\n      }\r\n      this.getFavorite(); // 每次點選按鈕重新讀取追蹤清單\r\n      emitter.emit('update-favorite');\r\n    },\r\n    toCategory(category) {\r\n      this.$router.push(`/productlist/${category}`);\r\n    },\r\n  },\r\n  created() {\r\n    const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n    this.$http.get(url).then((res) => {\r\n      if (res.data.success) {\r\n        this.cartNum = res.data.data.carts.length;\r\n      }\r\n    });\r\n    this.favNum = (JSON.parse(localStorage.getItem('favorite')) || []).length;\r\n    this.getCart();\r\n    this.getFavorite();\r\n    this.getProducts();\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./ProductCategory.vue?vue&type=template&id=2b2664c4\"\nimport script from \"./ProductCategory.vue?vue&type=script&lang=js\"\nexport * from \"./ProductCategory.vue?vue&type=script&lang=js\"\n\nimport \"./ProductCategory.vue?vue&type=style&index=0&id=2b2664c4&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","key","role","_createElementBlock","_Fragment","_createVNode","_component_LoadingElement","active","$data","isLoading","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_component_router_link","to","default","_withCtx","_cache","_","_normalizeClass","category","onClick","_withModifiers","$event","$options","toCategory","_hoisted_4","_renderList","products","item","id","href","getProduct","_hoisted_6","src","imageUrl","alt","_hoisted_7","_hoisted_8","_toDisplayString","title","_hoisted_9","_ctx","$filters","currency","price","_hoisted_5","_hoisted_10","_hoisted_11","toggleFavorite","isFavorite","_hoisted_14","_hoisted_13","_hoisted_12","_hoisted_15","type","addToCart","disabled","status","loadingItem","_hoisted_17","_createCommentVNode","_hoisted_16","data","product","favorite","favoriteIds","watch","handler","this","getProducts","deep","methods","url","$http","get","then","res","success","$route","params","filter","reverse","$router","push","cart","product_id","qty","post","$httpMessageState","emitter","emit","getCart","carts","getFavorite","JSON","parse","localStorage","getItem","forEach","some","toggleid","hasFavorite","fav","delItem","find","splice","indexOf","setItem","stringify","created","cartNum","length","favNum","__exports__","render"],"sourceRoot":""}