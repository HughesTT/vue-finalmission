"use strict";(self["webpackChunkproject_a"]=self["webpackChunkproject_a"]||[]).push([[612],{3612:function(t,s,e){e.r(s),e.d(s,{default:function(){return _}});var i=e(6768),a=e(4232),o=e(5130);const r={class:"container"},c={class:"productview"},n={class:"categorybtn"},l={class:"row"},d=["onClick"],u={class:"product_img"},h=["src"],g={class:"product_title"},p={class:"product_price text-start"},v={class:"btntool"},k={class:"bd-highlight"},b=["onClick"],f={key:0,class:"bi bi-heart"},m={key:1,class:"bi bi-heart-fill"},y={class:"bd-highlight"},L=["onClick","disabled"],C={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"};function $(t,s,e,$,I,F){const x=(0,i.g2)("LoadingElement"),S=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(x,{active:I.isLoading},null,8,["active"]),(0,i.Lk)("div",r,[(0,i.Lk)("div",c,[s[8]||(s[8]=(0,i.Lk)("h3",null,"全系列耳機",-1)),(0,i.Lk)("div",n,[(0,i.bF)(S,{to:"/productlist/allproducts"},{default:(0,i.k6)((()=>s[4]||(s[4]=[(0,i.Lk)("button",{class:"btn btn-outline-secondary"},"全部商品",-1)]))),_:1}),(0,i.Lk)("button",{class:(0,a.C4)(["btn btn-outline-secondary",{active:"gaming"===I.category}]),onClick:s[0]||(s[0]=(0,o.D$)((t=>F.toCategory("gaming")),["prevent"]))},"電競",2),(0,i.Lk)("button",{class:(0,a.C4)(["btn btn-outline-secondary",{active:"bluetooth"===I.category}]),onClick:s[1]||(s[1]=(0,o.D$)((t=>F.toCategory("bluetooth")),["prevent"]))},"藍芽 ",2),(0,i.Lk)("button",{class:(0,a.C4)(["btn btn-outline-secondary",{active:"noise-canceling"===I.category}]),onClick:s[2]||(s[2]=(0,o.D$)((t=>F.toCategory("noise-canceling")),["prevent"]))},"降噪 ",2),(0,i.Lk)("button",{class:(0,a.C4)(["btn btn-outline-secondary",{active:"music-glasses"===I.category}]),onClick:s[3]||(s[3]=(0,o.D$)((t=>F.toCategory("music-glasses")),["prevent"]))},"音訊眼鏡 ",2)]),(0,i.Lk)("div",l,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(I.products,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"productbox col-md-3 col-6",key:e.id},[(0,i.Lk)("a",{href:"#",onClick:(0,o.D$)((t=>F.getProduct(e.id)),["prevent"])},[(0,i.Lk)("div",u,[s[5]||(s[5]=(0,i.Lk)("div",{class:"morebox"},[(0,i.Lk)("div",{class:"morebtn"},"更多資訊")],-1)),(0,i.Lk)("img",{src:e.imageUrl,class:"img-fluid",alt:"image"},null,8,h)]),(0,i.Lk)("div",g,(0,a.v_)(e.title),1),(0,i.Lk)("div",p," NT $"+(0,a.v_)(t.$filters.currency(e.price)),1)],8,d),(0,i.Lk)("div",v,[(0,i.Lk)("div",k,[(0,i.Lk)("button",{class:"btn btn-outline-danger",onClick:t=>F.toggleFavorite(e)},[F.isFavorite(e.id)?((0,i.uX)(),(0,i.CE)("i",m)):((0,i.uX)(),(0,i.CE)("i",f))],8,b)]),(0,i.Lk)("div",y,[(0,i.Lk)("button",{type:"button",class:"moreinfo btn btn-outline-danger",onClick:t=>F.addToCart(e.id),disabled:this.status.loadingItem===e.id},[this.status.loadingItem===e.id?((0,i.uX)(),(0,i.CE)("div",C,s[6]||(s[6]=[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...",-1)]))):(0,i.Q3)("",!0),s[7]||(s[7]=(0,i.Lk)("i",{class:"bi bi-cart2"},null,-1))],8,L)])])])))),128))])])])],64)}e(4114),e(8111),e(2489),e(116),e(7588),e(3579);var I=e(1600),F={data(){return{products:[],product:{},isLoading:!1,status:{loadingItem:""},favorite:[],favoriteIds:[],category:"all"}},watch:{"$route.params.category":{handler(){this.products=[],this.getProducts()},deep:!0}},methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/hughesh-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{t.data.success&&(this.category=this.$route.params.category,this.$route.params.category?this.products=t.data.products.filter((t=>t.category===this.$route.params.category)):this.products=t.data.products.reverse()),this.isLoading=!1}))},getProduct(t){this.$router.push(`/productlist/product/${t}`)},addToCart(t){const s="https://vue3-course-api.hexschool.io/api/hughesh-api/cart";this.status.loadingItem=t;const e={product_id:t,qty:1};this.$http.post(s,{data:e}).then((t=>{this.$httpMessageState(t,"成功加入購物車"),this.status.loadingItem="",I.A.emit("update-cart")}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/hughesh-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.isLoading=!1,t.data.success&&(this.cart=t.data.data.carts)}))},getFavorite(){this.favorite=JSON.parse(localStorage.getItem("favorite"))||[],this.favoriteIds=[],this.favorite.forEach((t=>{this.favoriteIds.push(t.id)}))},isFavorite(t){return this.favoriteIds.some((s=>s===t))},toggleFavorite(t){const s=t.id,e=this.favorite.some((t=>t.id===s));if(e){const t=this.favorite.find((t=>t.id===s));this.favorite.splice(this.favorite.indexOf(t),1),localStorage.setItem("favorite",JSON.stringify(this.favorite))}else this.favorite.push(t),localStorage.setItem("favorite",JSON.stringify(this.favorite));this.getFavorite(),I.A.emit("update-favorite")},toCategory(t){this.$router.push(`/productlist/${t}`)}},created(){const t="https://vue3-course-api.hexschool.io/api/hughesh-api/cart";this.$http.get(t).then((t=>{t.data.success&&(this.cartNum=t.data.data.carts.length)})),this.favNum=(JSON.parse(localStorage.getItem("favorite"))||[]).length,this.getCart(),this.getFavorite(),this.getProducts()}},x=e(1241);const S=(0,x.A)(F,[["render",$]]);var _=S}}]);
//# sourceMappingURL=612.4407b975.js.map